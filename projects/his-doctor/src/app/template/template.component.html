<div class="container-fluid">
    <div class="row">    
    </div>
    <div class="row">
        <div class="col-sm-9 questionDiv p-0">
            <div class="row p-0 mt-1">
                <div class="col-sm-6">
                    <label class="control-label col-sm-4 mt-3">Department</label>
                    <div class="col-sm-8">
                        <select class="form-control" id='deptCode' [(ngModel)]="mappedDeptCode" #deptCode (change)='onchangeDepartment()'>
                            <option value="">Choose Department</option>
                            <option *ngFor="let item of departments" value='{{item.DEPTCODE}}'>
                                {{item.DEPTNAME | titlecase}}
                            </option>
                        </select>
                    </div>
                </div>
                <div class="col-sm-6">
                    <label class="control-label col-sm-4 mt-3">Sections</label>
                    <div class="col-sm-8">                       
                        <select class='form-control' [(ngModel)]="mappedSectionCode">
                            <option value='' selected>Choose Section</option>
                            <option *ngFor="let sec of deptSections" value="{{sec.SECTIONID}}">
                                {{sec.SECTIONNAME | titlecase}}
                            </option>
                        </select>
                    </div>
                </div>
            </div>
            <div class="col-sm-12 pl-3 pr-3 pt-2 pb-2">
                <div class="col-sm-4 p-0">
                    <h4 class="m-0 pt-3">
                        <!-- FORM NAME -->
                        <a class="f-15 float-left mr-3" (click)="onBack()"><i
                            class="fas fa-arrow-left"></i></a>
                        <app-inline-edit class="f-15" #temp name="{{formType?.tempName}}"
                            (actionEvent)='modifyOption($event, "", "", "template")'>
                            {{formType?.tempName | titlecase}}
                        </app-inline-edit>
                    </h4>                    
                    <div class="clearfix"></div>
                    <div class="f-15 mt-2">
                        <div class="dropdown mt-3">
                            <button class="btn btn-default dropdown-toggle f-15" type="button" id="dropdownMenuButton" (click)="addFormActionLogic($event, 'init')">
                                <i class="fa fa-cog f-15 text-secondary mr-2"></i> Template Init Action
                            </button>
                        </div>
                    </div>                    
                    <div class="clearfix"></div>
                </div>
                <div class="col-sm-8 p-0 d-flex flex-column align-items-end">
                    <div class="btn-group" role="group" aria-label="form buttons">
                        <button type="button" class="btn btn-secondary btn-lg" (click)="previewTemplate($event)"><i
                                class="fa fa-eye"></i> Preview</button>
                        <button type="button" class="btn btn-secondary btn-lg" (click)="createTemplate($event)"><i
                                class="fa fa-save"></i> Save</button>
                        <button type="button" class="btn btn-secondary btn-lg" (click)="deleteTemplate($event)" *ngIf="!(stateData?.isNewTemplate)"><i
                            class="fa fa-trash"></i> Remove</button>                                
                    </div>
                </div>
            </div>
            <div class="clearfix"></div>
            <app-design-container [controlType]="formType" [templates]="templateList" (actionEvent)="widgetActionEvent($event)" *ngIf="toolboxData.isShowDesigner === true"></app-design-container>
            <div class="clearfix"></div>
            <hr />
        </div>
        <div class="col-sm-3 toolBar p-0">
            <app-tool-box [toolboxData]="toolboxData" (actionEvent)="widgetActionEvent($event)"></app-tool-box>
        </div>        
    </div>
</div>

<!-- FORM TYPE Modal -->
<!--<div class="modal" id="mdlFrmType" data-backdrop="static">
    <div class="modal-dialog">
        <div class="modal-content light-green">
            <div class="modal-header">
                <h4 class="modal-title">Choose form type to proceed</h4>
            </div>
            <div class="modal-body">
                <div class="col-sm-12" align='center'>                    
                    <div class="col-sm-6 pt-4" (click)="getFormType($event, 'single')"
                        [ngClass]="{'active': this.formType?.tempType === 'single'}">
                        <i class="fa fa-check-circle text-light-blue f-15"></i>
                        <img src="/assets/images/forms/single.jpg" height="70" width="100" />
                        <p class="mt-3"><b class="f-15">Single Column</b></p>
                    </div>
                    <div class="col-sm-6 pt-4" (click)="getFormType($event, 'double')"
                        [ngClass]="{'active': this.formType?.tempType === 'double'}">
                        <i class="fa fa-check-circle text-light-blue f-15"></i>
                        <img src="/assets/images/forms/double.jpg" height="70" width="100" />
                        <p class="mt-3"><b class="f-15">Double Column</b></p>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-lg btn-secondary" data-dismiss="modal"
                    (click)='onSubmitFormTypeSelection($event)'>Continue</button>
            </div>

        </div>
    </div>
</div>-->

<!-- MATRIX ROW/COLUMNS Modal -->
<div class="modal" id="mdlMatrixTable" data-backdrop="static">
    <div class="modal-dialog">
        <div class="modal-content light-green">
            <div class="modal-header">
                <h3 class="modal-title text-light-blue">Table Attributes</h3>
            </div>
            <div class="modal-body">
                <div class="col-sm-12">
                    <div class="form-group">
                        <label class="control-label">Columns</label>
                        <div>
                            <input type="number" class="form-control" value="3" id='txtTabColumns' />
                        </div>
                    </div>
                    <div class="form-group">
                        <label class="control-label">Rows</label>
                        <div>
                            <input type="number" class="form-control" value="3" id='txtTabRows' />
                        </div>
                    </div>
                    <div class="form-group">
                        <div class="form-check-inline">
                            <label class="form-check-label" for="reqTabBorder">
                                <input type="checkbox" class="form-check-input" id="reqTabBorder" #reqTabBorder
                                    name="reqTabBorder" value="reqTabBorder">Require table border
                            </label>
                        </div>
                        <div class="form-check-inline">
                            <label class="form-check-label" for="reqTabHead">
                                <input type="checkbox" class="form-check-input" id="reqTabHead" #reqTabHead
                                    name="reqTabHead" value="reqTabHead">Require table header
                            </label>
                        </div>
                        <input type="text" id='controlIndex' class="d-none" />
                        <div class="form-check-inline float-right" [hidden]='!reqTabHead.checked'>
                            <table class="table table-bordered table-striped">
                                <thead>
                                    <tr>
                                        <th class="text-white secondary-color text-capitalize">header 1</th>
                                        <th class="text-white secondary-color text-capitalize">header 2</th>
                                    </tr>
                                </thead>
                            </table>
                        </div>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-lg btn-secondary" data-dismiss="modal"
                    (click)='onSubmitFormTypeSelection($event)'>Cancel</button>
                <button type="button" class="btn btn-lg btn-primary" data-dismiss="modal"
                    (click)='onSubmitTableModal($event)'>Continue</button>
            </div>
        </div>
    </div>
</div>

<!-- Import Template Modal -->
<!--<div class="modal show" id="mdlImportTemplate" data-backdrop="static" *ngIf="isShowImportTemplate">
    <div class="modal-dialog">
        <div class="modal-content light-green">
            <div class="modal-header secondary-color">
                <h3 class="modal-title text-white">Templates</h3>
            </div>
            <div class="modal-body">
                <div class="col-sm-12">
                    <table class="table table-bordered f-12">
                        <thead>
                            <tr>
                                <th class="light-blue text-white"></th>
                                <th class="light-blue text-white">Template</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr *ngFor="let temp of templates" >
                                <td>
                                    <input type="checkbox" id='{{temp.id}}' [checked]='temp.checked' [(ngModel)]="temp.checked">
                                </td>
                                <td>
                                    <b>{{temp.TEMPNAME | titlecase}}</b>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-lg btn-secondary" data-dismiss="modal">Cancel</button>
                <button type="button" class="btn btn-lg btn-primary" data-dismiss="modal"
                    (click)='onSubmitTemplateImport($event)'>Add</button>
            </div>
        </div>
    </div>
</div>-->

<!-- Delete Control Modal -->
<div class="modal show" id="mdlDelCntrlInCell" data-backdrop="static" *ngIf="isShowDelCntrlInCell">
    <div class="modal-dialog">
        <div class="modal-content light-green">
            <div class="modal-header secondary-color">
                <h3 class="modal-title text-white">Delete</h3>
            </div>
            <div class="modal-body p-5">
                <div class="col-sm-12">
                    <div class="">
                        <label class="form-check-label pl-5 pr-5" [class.active]='deleteControlType=="col"'>
                            <p><i class="fa fa-columns fa-3x text-red"></i></p>
                            <input type="radio" [hidden]='true' class="form-check-input" [(ngModel)]="deleteControlType"  id='rbCol' value='col' name="delCntrl"> Column
                        </label>
                      </div>
                      <div class="">
                        <label class="form-check-label pl-5 pr-5" [class.active]='deleteControlType=="row"'>
                            <p><i class="fa fa-columns fa-rotate-90 fa-3x text-red"></i></p>
                            <input type="radio" [hidden]='true' class="form-check-input" [(ngModel)]="deleteControlType" id='rbRow' value='row' name="delCntrl">Row
                        </label>
                      </div>
                      <div class="">
                        <label class="form-check-label pl-5 pr-5" [class.active]='deleteControlType=="empty"'>
                            <p><i class="fa fa-times fa-3x text-red"></i></p>
                            <input type="radio" [hidden]='true' class="form-check-input" [(ngModel)]="deleteControlType" id='rbEmpty' value="empty" name="delCntrl"> Empty Cell
                        </label>
                      </div>
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-lg btn-secondary" data-dismiss="modal" (click)='isShowDelCntrlInCell=false'>Cancel</button>
                <button type="button" class="btn btn-lg btn-primary" data-dismiss="modal"
                    (click)='onSubmitDeleteAction($event)'>Continue</button>
            </div>
        </div>
    </div>
</div>

<!--<app-matrix-popup [controlIndex]="tblControlIndex" *ngIf="isShowMatrixPopup" (actionEvent)="widgetActionEvent($event)"></app-matrix-popup>-->

<!--<app-action-editor2 [ngClass]="[actionEditorClass]"></app-action-editor2>-->